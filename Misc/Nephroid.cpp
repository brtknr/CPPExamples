#include <iostream>#include <fstream>#include <cmath>#include <cstdlib>using namespace std;#define   MaxNo 501void DXFSetUp(void);void DXFLines(void);void DXFText(void);void DXFFinishOff(void);int   i,NoSegments,Layer,Colour,ray,nrays;float x[MaxNo],y[MaxNo],z[MaxNo],PI,      R,Theta,      DXFx1,DXFy1,DXFz1,      DXFx2,DXFy2,DXFz2;ofstream Chris("Nephroid.dxf");int main(void){PI=4.0*atan(1.0);R=10000.0;cout<<"How many rays of light?\n";cin>>nrays;NoSegments=MaxNo-1;DXFSetUp();Layer=0;Colour=0;for(i=0;i<=NoSegments;i+=1){Theta=-PI/2.0+(PI*i)/(1.0*NoSegments);x[i]=(R/2.0)*(3.0*cos(Theta)-2.0*cos(Theta)*cos(Theta)*cos(Theta));y[i]=R*sin(Theta)*sin(Theta)*sin(Theta);z[i]=0.0;}for(i=1;i<=NoSegments;i+=1){DXFx1=x[i-1];DXFy1=y[i-1];DXFz1=z[i-1];DXFx2=x[i];DXFy2=y[i];DXFz2=z[i];DXFLines();}for(i=0;i<=NoSegments;i+=1){Theta=-PI/2.0+(PI*i)/(1.0*NoSegments);x[i]=R*cos(Theta);y[i]=R*sin(Theta);z[i]=0.0;}for(i=1;i<=NoSegments;i+=1){DXFx1=x[i-1];DXFy1=y[i-1];DXFz1=z[i-1];DXFx2=x[i];DXFy2=y[i];DXFz2=z[i];DXFLines();}for(ray=1;ray<=nrays;ray+=1){Theta=asin(((2.0*ray)-1.0-(1.0*nrays))/(1.0*nrays));DXFx1=R*cos(Theta);DXFy1=R*sin(Theta);DXFz1=0.0;DXFx2=(R/4.0)*(3.0*cos(Theta)-cos(3.0*Theta));DXFy2=(R/4.0)*(3.0*sin(Theta)-sin(3.0*Theta));DXFz2=0.0;DXFLines();DXFx2=-R;DXFy2=DXFy1;DXFLines();DXFx2=0.0;DXFy2=0.0;DXFLines();}DXFFinishOff();cout<<"DXF file written, end of program\n";return 0;}void DXFSetUp(void){Chris<<"0\n";Chris<<"SECTION\n";Chris<<"2\n";Chris<<"ENTITIES\n";}void DXFLines(void){Chris<<"0\nLINE\n8\n"<<Layer<<"\n";Chris<<"10\n"<<DXFx1<<"\n";Chris<<"20\n"<<DXFy1<<"\n";Chris<<"30\n"<<DXFz1<<"\n";Chris<<"11\n"<<DXFx2<<"\n";Chris<<"21\n"<<DXFy2<<"\n";Chris<<"31\n"<<DXFz2<<"\n";Chris<<"62\n"<<Colour<<"\n";}void DXFFinishOff(void){Chris<<"0\n";Chris<<"ENDSEC\n";Chris<<"0\n";Chris<<"EOF\n";Chris.close();}