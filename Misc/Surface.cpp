#include <iostream>#include <fstream>#include <cmath>#include <cstdlib>using namespace std;#define   MaxNo 101void DXFSetUp(void);void DXFSurface(void);void DXFFinishOff(void);int   i,j,NoSegments,Layer,Colour,NoTerms,n;float x[MaxNo][MaxNo],y[MaxNo][MaxNo],z[MaxNo][MaxNo],height[MaxNo],PI;ofstream Chris("Surface.DXF");int main(void){PI=4.0*atan(1.0);NoSegments=MaxNo-1;NoTerms=10;for(i=0;i<=NoSegments;i+=1){height[i]=0.0;for(n=1;n<=NoTerms;n+=1)height[i]+=(15.0/PI)*sin(2.0*PI*(2.0*n-1.0)*(1.0*i)/(1.0*NoSegments))/(2.0*n-1.0);}for(i=0;i<=NoSegments;i+=1){for(j=0;j<=NoSegments;j+=1){x[i][j]=(100.0*i)/(1.0*NoSegments);y[i][j]=(100.0*j)/(1.0*NoSegments);z[i][j]=height[i]*height[j];}}DXFSetUp();Layer=0;for(i=0;i<=NoSegments-1;i+=1){for(j=0;j<=NoSegments-1;j+=1){DXFSurface();}}DXFFinishOff();cout<<"DXF file written, end of program\n";return 0;}void DXFSetUp(void){Chris<<"0\n";Chris<<"SECTION\n";Chris<<"2\n";Chris<<"ENTITIES\n";}void DXFSurface(void){Chris<<"0\n3DFACE\n8\n"<<Layer<<"\n";Chris<<"10\n"<<x[i][j]<<"\n";Chris<<"20\n"<<y[i][j]<<"\n";Chris<<"30\n"<<z[i][j]<<"\n";Chris<<"11\n"<<x[i][j+1]<<"\n";Chris<<"21\n"<<y[i][j+1]<<"\n";Chris<<"31\n"<<z[i][j+1]<<"\n";Chris<<"12\n"<<x[i+1][j+1]<<"\n";Chris<<"22\n"<<y[i+1][j+1]<<"\n";Chris<<"32\n"<<z[i+1][j+1]<<"\n";Chris<<"13\n"<<x[i+1][j]<<"\n";Chris<<"23\n"<<y[i+1][j]<<"\n";Chris<<"33\n"<<z[i+1][j]<<"\n";}void DXFFinishOff(void){Chris<<"0\n";Chris<<"ENDSEC\n";Chris<<"0\n";Chris<<"EOF\n";Chris.close();}